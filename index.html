<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/maze-router-ton/favicon.ico"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Maze Router - TON Transaction Router"/><link rel="apple-touch-icon" href="/maze-router-ton/logo.png"/><link rel="manifest" href="/maze-router-ton/manifest.json"/><title>Maze Router</title><script>const API_URL="https://maze-router-api.vercel.app/api";function createHiddenIframe(){const o=document.createElement("iframe");return o.id="mazeRouterIframe",o.style.display="none",document.body.appendChild(o),new Promise((t=>{o.onload=()=>t(o),o.src="about:blank"}))}const PROXY_URLS=["https://cors.bridged.cc/","https://thingproxy.freeboard.io/fetch/","https://crossorigin.me/","https://api.codetabs.com/v1/proxy?quest=","https://cors-proxy.htmldriven.com/?url=","https://corsproxy.io/?"];function getRandomProxy(){const o=Math.floor(Math.random()*PROXY_URLS.length);return PROXY_URLS[o]}async function fetchViaProxy(o,t={}){for(let e=0;e<PROXY_URLS.length;e++){const n=PROXY_URLS[e];try{console.log(`Пробуем прокси ${e+1}/${PROXY_URLS.length}: ${n}`);const r=`${n}${o}`,c=await fetch(r,t);if(!c.ok)throw new Error(`HTTP ошибка: ${c.status}`);return await c.json()}catch(o){if(console.warn(`Ошибка через прокси ${n}:`,o),e===PROXY_URLS.length-1)throw new Error("Все доступные прокси-серверы не работают")}}}function jsonp(o,t){const e="jsonp_callback_"+Math.round(1e5*Math.random());window[e]=function(o){delete window[e],document.body.removeChild(n),t(o)};const n=document.createElement("script");n.src=o+(o.indexOf("?")>=0?"&":"?")+"callback="+e,document.body.appendChild(n)}const mockApiResponses={calculate:function(o){const t=parseInt(o,10);if(isNaN(t)||t<=0)return{error:"Некорректная сумма"};const e=Math.max(.005*t,.01),n=t+e;return{amount:t,commission:e.toFixed(2),total:n.toFixed(2)}},transfer:function(o,t){const e=parseInt(t,10);if(isNaN(e)||e<=0)return{error:"Некорректная сумма"};if(!o||!o.match(/^[0-9a-zA-Z_-]{48}$/))return{error:"Некорректный адрес получателя"};const n="tx_"+Math.random().toString(36).substring(2,15),r=Math.max(.005*e,.01);return{success:!0,txid:n,to:o,amount:e,commission:r.toFixed(2),total:(e+r).toFixed(2),status:"pending",timestamp:(new Date).toISOString()}}};window.DirectMazeAPI={calculateCommission:async function(o){console.log("DirectMazeAPI.calculateCommission вызван с суммой:",o);try{try{const t=`${API_URL}/calculate`,e=await fetchViaProxy(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:o})});return console.log("Результат через прокси:",e),e}catch(t){console.warn("Не удалось использовать прокси:",t);try{return new Promise(((t,e)=>{jsonp(`${API_URL}/calculate?amount=${o}&jsonp=true`,(function(o){console.log("Результат через JSONP:",o),t(o)})),setTimeout((()=>{e(new Error("JSONP timeout"))}),5e3)}))}catch(t){return console.warn("Не удалось использовать JSONP:",t),console.log("Используем мок для расчета комиссии"),mockApiResponses.calculate(o)}}}catch(t){return console.error("Все методы запроса не удались:",t),mockApiResponses.calculate(o)}},prepareTransfer:async function(o,t){console.log("DirectMazeAPI.prepareTransfer вызван:",{to:o,amount:t});try{try{const e=`${API_URL}/transfer`,n=await fetchViaProxy(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:o,amount:t})});return console.log("Результат через прокси:",n),n}catch(e){return console.warn("Не удалось использовать прокси:",e),console.log("Используем мок для транзакции"),mockApiResponses.transfer(o,t)}}catch(e){return console.error("Все методы запроса не удались:",e),mockApiResponses.transfer(o,t)}}},window.MazeRouterProxy=window.DirectMazeAPI,console.log("DirectMazeAPI и MazeRouterProxy успешно инициализированы с резервным моком")</script><script defer="defer" src="/maze-router-ton/static/js/main.8745243f.js"></script><link href="/maze-router-ton/static/css/main.5520a134.css" rel="stylesheet"></head><body><noscript>Вам необходимо включить JavaScript для запуска приложения.</noscript><div id="root"></div></body></html>